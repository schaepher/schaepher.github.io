<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>内存分配器 - Schaepher's Blog</title><meta name=Description content="深透理解，熟练运用；似懂非懂，其实不懂。"><meta property="og:url" content="https://schaepher.github.io/2020/03/23/memory-allocation/">
<meta property="og:site_name" content="Schaepher's Blog"><meta property="og:title" content="内存分配器"><meta property="og:description" content="传统的内存分配和现代的内存分配 传统的内存分配是在需要内存的时候使用 malloc() 函数直接向操作系统申请内存，在释放内存的时候用 free() 把内存还给操作系统。
malloc = memory allocate
直接使用这两个函数来管理内存的问题在于，每次申请内存都是一个很耗时的操作，而且频繁申请和释放内存会导致内存有很多碎片（外部碎片）。"><meta property="og:locale" content="zh_CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-03-23T23:46:00+00:00"><meta property="article:modified_time" content="2020-03-24T02:44:00+00:00"><meta property="article:tag" content="Memcache"><meta property="article:tag" content="Redis"><meta property="article:tag" content="PHP"><meta property="article:tag" content="GO"><meta property="article:tag" content="内存"><meta property="article:tag" content="内存分配"><meta property="og:image" content="https://schaepher.github.io/logo.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://schaepher.github.io/logo.png"><meta name=twitter:title content="内存分配器"><meta name=twitter:description content="传统的内存分配和现代的内存分配 传统的内存分配是在需要内存的时候使用 malloc() 函数直接向操作系统申请内存，在释放内存的时候用 free() 把内存还给操作系统。
malloc = memory allocate
直接使用这两个函数来管理内存的问题在于，每次申请内存都是一个很耗时的操作，而且频繁申请和释放内存会导致内存有很多碎片（外部碎片）。"><meta name=application-name content="Schaepher's Blog"><meta name=apple-mobile-web-app-title content="Schaepher's Blog"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://schaepher.github.io/2020/03/23/memory-allocation/><link rel=prev href=https://schaepher.github.io/2020/03/23/simple-map/><link rel=next href=https://schaepher.github.io/2020/03/23/trees/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=/lib/fontawesome-free/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/fontawesome-free/css/all.min.css></noscript><link rel=preload href=/lib/animate/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"内存分配器","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/schaepher.github.io\/2020\/03\/23\/memory-allocation\/"},"genre":"posts","keywords":"Memcache, Redis, PHP, GO, 内存, 内存分配","wordcount":1109,"url":"https:\/\/schaepher.github.io\/2020\/03\/23\/memory-allocation\/","datePublished":"2020-03-23T23:46:00+00:00","dateModified":"2020-03-24T02:44:00+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"xxxx"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Schaepher's Blog"></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/>主页 </a><a class=menu-item href=/posts/ title=文章按年份分类>文章 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/categories/>分类 </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i>
</span></span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Schaepher's Blog"></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/ title>主页</a><a class=menu-item href=/posts/ title=文章按年份分类>文章</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/categories/ title>分类</a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">内存分配器</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>xxxx</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2020-03-23>2020-03-23</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;约 1109 字&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;预计阅读 3 分钟&nbsp;</div></div><div class="details toc" id=toc-static data-kept=true><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#传统的内存分配和现代的内存分配>传统的内存分配和现代的内存分配</a></li><li><a href=#现代内存分配器>现代内存分配器</a><ul><li><a href=#php>PHP</a></li><li><a href=#golang>Golang</a></li><li><a href=#redis>Redis</a></li><li><a href=#memcache>Memcache</a></li></ul></li><li><a href=#扩展阅读>扩展阅读</a></li></ul></nav></div></div><div class=content id=content><h2 id=传统的内存分配和现代的内存分配>传统的内存分配和现代的内存分配</h2><p>传统的内存分配是在需要内存的时候使用 <code>malloc()</code> 函数直接向操作系统申请内存，在释放内存的时候用 <code>free()</code> 把内存还给操作系统。</p><blockquote><p>malloc = memory allocate</p></blockquote><p>直接使用这两个函数来管理内存的问题在于，每次申请内存都是一个很耗时的操作，而且频繁申请和释放内存会导致内存有很多碎片（外部碎片）。</p><blockquote><p>外部碎片：分散在内存中的小块内存，其总和可以满足某个进程的申请要求，但由于内存碎片不连续，进程无法一次性申请这些内存。</p></blockquote><p>例如：</p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-c"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=o>+-----+-----+-----+-----+-----+-----+-----+-----+-----+</span>
</span></span><span class=line><span class=cl><span class=o>|</span>  <span class=mi>0</span>  <span class=o>|</span>  <span class=mi>1</span>  <span class=o>|</span>  <span class=mi>2</span>  <span class=o>|</span>  <span class=mi>3</span>  <span class=o>|</span>  <span class=mi>4</span>  <span class=o>|</span>  <span class=mi>5</span>  <span class=o>|</span>  <span class=mi>6</span>  <span class=o>|</span>  <span class=mi>7</span>  <span class=o>|</span>  <span class=mi>8</span>  <span class=o>|</span>
</span></span><span class=line><span class=cl><span class=o>+-----------------------------------------------------+</span>
</span></span><span class=line><span class=cl><span class=o>|</span> <span class=o>|-------|</span> <span class=o>|</span> <span class=o>|-------|</span> <span class=o>|</span> <span class=o>|-------------|</span> <span class=o>|</span>           <span class=o>|</span>
</span></span><span class=line><span class=cl><span class=o>|</span> <span class=o>|-------|</span> <span class=o>|</span> <span class=o>|-------|</span> <span class=o>|</span> <span class=o>|-------------|</span> <span class=o>|</span>           <span class=o>|</span>
</span></span><span class=line><span class=cl><span class=o>+-----------+-----------+-----------------+-----+-----+</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>+-----+-----+-----+-----+-----+-----+-----+-----+-----+</span>
</span></span><span class=line><span class=cl><span class=o>|</span>  <span class=mi>0</span>  <span class=o>|</span>  <span class=mi>1</span>  <span class=o>|</span>  <span class=mi>2</span>  <span class=o>|</span>  <span class=mi>3</span>  <span class=o>|</span>  <span class=mi>4</span>  <span class=o>|</span>  <span class=mi>5</span>  <span class=o>|</span>  <span class=mi>6</span>  <span class=o>|</span>  <span class=mi>7</span>  <span class=o>|</span>  <span class=mi>8</span>  <span class=o>|</span>
</span></span><span class=line><span class=cl><span class=o>+-----------------+-----------------------------------+</span>
</span></span><span class=line><span class=cl><span class=o>|</span> <span class=o>|-------|</span> <span class=o>|</span>           <span class=o>|</span> <span class=o>|-------------|</span> <span class=o>|</span>           <span class=o>|</span>
</span></span><span class=line><span class=cl><span class=o>|</span> <span class=o>|-------|</span> <span class=o>|</span>           <span class=o>|</span> <span class=o>|-------------|</span> <span class=o>|</span>           <span class=o>|</span>
</span></span><span class=line><span class=cl><span class=o>+-----------+-----------+-----------------+-----+-----+</span></span></span></code></pre></div></div><ol><li>申请 2 块单位为 2 的内存和 1 块单位为 3 的内存；</li><li>释放掉中间一块单位为 2 的内存；</li><li>此时如果要申请一块长度为 3 的内存，无法申请到。</li></ol><p>为了解决这些问题，现代的内存分配器会一次性向操作系统申请一块（或者一堆）大内存。大内存可按照特定单位切割成一块块大小相等的内存块，不同类型的单位切割成的内存块大小不同。当进程内部需要内存的时候，找到一块与所需内存大小非常接近但又比所需内存大的内存块，并直接使用。</p><p>例如：</p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-c"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=err>内存以</span> <span class=mi>3</span> <span class=err>为单位做切割。</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>+-----+-----+-----+-----+-----+-----+-----+-----+-----+</span>
</span></span><span class=line><span class=cl><span class=o>|</span>  <span class=mi>0</span>  <span class=o>|</span>  <span class=mi>1</span>  <span class=o>|</span>  <span class=mi>2</span>  <span class=o>|</span>  <span class=mi>3</span>  <span class=o>|</span>  <span class=mi>4</span>  <span class=o>|</span>  <span class=mi>5</span>  <span class=o>|</span>  <span class=mi>6</span>  <span class=o>|</span>  <span class=mi>7</span>  <span class=o>|</span>  <span class=mi>8</span>  <span class=o>|</span>
</span></span><span class=line><span class=cl><span class=o>+-----------+-----------------+-----------------------+</span>
</span></span><span class=line><span class=cl><span class=o>|</span> <span class=o>|--------|</span>      <span class=o>|</span> <span class=o>|-------|</span>       <span class=o>|</span> <span class=o>|-------------|</span> <span class=o>|</span>
</span></span><span class=line><span class=cl><span class=o>|</span> <span class=o>|--------|</span>      <span class=o>|</span> <span class=o>|-------|</span>       <span class=o>|</span> <span class=o>|-------------|</span> <span class=o>|</span>
</span></span><span class=line><span class=cl><span class=o>+-----------------+-----------------+-----------------+</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>+-----+-----+-----+-----+-----+-----+-----+-----+-----+</span>
</span></span><span class=line><span class=cl><span class=o>|</span>  <span class=mi>0</span>  <span class=o>|</span>  <span class=mi>1</span>  <span class=o>|</span>  <span class=mi>2</span>  <span class=o>|</span>  <span class=mi>3</span>  <span class=o>|</span>  <span class=mi>4</span>  <span class=o>|</span>  <span class=mi>5</span>  <span class=o>|</span>  <span class=mi>6</span>  <span class=o>|</span>  <span class=mi>7</span>  <span class=o>|</span>  <span class=mi>8</span>  <span class=o>|</span>
</span></span><span class=line><span class=cl><span class=o>+-----------+-----------+-----+-----------------------+</span>
</span></span><span class=line><span class=cl><span class=o>|</span> <span class=o>|--------|</span>      <span class=o>|</span>                 <span class=o>|</span> <span class=o>|-------------|</span> <span class=o>|</span>
</span></span><span class=line><span class=cl><span class=o>|</span> <span class=o>|--------|</span>      <span class=o>|</span>                 <span class=o>|</span> <span class=o>|-------------|</span> <span class=o>|</span>
</span></span><span class=line><span class=cl><span class=o>+-----------------+-----------------+-----------------+</span></span></span></code></pre></div></div><ol><li>申请 2 块单位为 2 的内存和 1 块单位为 3 的内存；</li><li>释放掉中间一块单位为 2 的内存；</li><li>此时如果要申请一块长度为 3 的内存，可以直接申请中间那块。</li></ol><p>这比向系统直接申请的方式快得多，并且减少了外部碎片。但因为内存块往往比所需内存大一点，多出来的部分就成了内部碎片。这个问题相比外部碎片好一些，内部碎片可以通过设置以不同单位为块的内存来缓解。</p><h2 id=现代内存分配器>现代内存分配器</h2><p>现代内存分配器例如 Linux 的 SLUB Allocator （前身是 SLAB Allocator），此外还有比较常见的： jemalloc 、 TCMalloc 和 ptmalloc 。</p><blockquote><p>TCMalloc = Thread-Caching Malloc<br>ptmalloc = pthreads Malloc</p></blockquote><p>以下举一些例子。</p><h3 id=php>PHP</h3><p>PHP 的内存分配器参考 jemalloc 和 TCMalloc 的实现。</p><p><code>Zend/zend_alloc.c</code>：</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-c"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm> * zend_alloc is designed to be a modern CPU cache friendly memory manager
</span></span></span><span class=line><span class=cl><span class=cm> * for PHP. Most ideas are taken from jemalloc and tcmalloc implementations.
</span></span></span><span class=line><span class=cl><span class=cm> * ....
</span></span></span><span class=line><span class=cl><span class=cm> */</span></span></span></code></pre></div></div><h3 id=golang>Golang</h3><p>Golang 的内存分配器是基于 TCMalloc 实现的。</p><p><code>runtime/malloc.go</code>：</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-go"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Memory allocator.</span>
</span></span><span class=line><span class=cl><span class=c1>//</span>
</span></span><span class=line><span class=cl><span class=c1>// This was originally based on tcmalloc, but has diverged quite a bit.</span></span></span></code></pre></div></div><h3 id=redis>Redis</h3><p>Redis 把 jemalloc 和 TCMalloc 作为可选项，可以在编译的时候选择用哪种分配器。</p><p><code>src/zmalloc.h</code>：</p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-c"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#if defined(USE_TCMALLOC)
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1>// 省略
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#include</span> <span class=cpf>&lt;google/tcmalloc.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1>// 省略
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#endif
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=cp>#elif defined(USE_JEMALLOC)
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1>// 省略
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#include</span> <span class=cpf>&lt;jemalloc/jemalloc.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1>// 省略
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#endif</span></span></span></code></pre></div></div><p>在 redis 源码中，自带了 jemalloc 源码 <code>deps/jemalloc</code>。</p><h3 id=memcache>Memcache</h3><p>使用的是 SLAB Allocator 的机制。</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-c"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=复制到剪贴板><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm> * Slabs memory allocation, based on powers-of-N.
</span></span></span><span class=line><span class=cl><span class=cm> * ....
</span></span></span><span class=line><span class=cl><span class=cm> */</span></span></span></code></pre></div></div><h2 id=扩展阅读>扩展阅读</h2><p>内存优化总结:ptmalloc、tcmalloc和jemalloc： <a href=http://www.cnhalo.net/2016/06/13/memory-optimize/ target=_blank rel="noopener noreffer">http://www.cnhalo.net/2016/06/13/memory-optimize/</a></p><p>图解Go内存分配器： <a href=https://tonybai.com/2020/02/20/a-visual-guide-to-golang-memory-allocator-from-ground-up/ target=_blank rel="noopener noreffer">https://tonybai.com/2020/02/20/a-visual-guide-to-golang-memory-allocator-from-ground-up/</a></p><p>Memcache-内存模型-源码分析： <a href=https://www.jianshu.com/p/a824ae00d9bb target=_blank rel="noopener noreffer">https://www.jianshu.com/p/a824ae00d9bb</a></p><p>Linux slab 分配器剖析： <a href=https://www.ibm.com/developerworks/cn/linux/l-linux-slab-allocator/index.html target=_blank rel="noopener noreffer">https://www.ibm.com/developerworks/cn/linux/l-linux-slab-allocator/index.html</a></p><p>图解 TCMalloc： <a href=https://zhuanlan.zhihu.com/p/29216091 target=_blank rel="noopener noreffer">https://zhuanlan.zhihu.com/p/29216091</a></p><p>（七）PHP内存管理详解： <a href=https://blog.csdn.net/IT_10/article/details/94768679 target=_blank rel="noopener noreffer">https://blog.csdn.net/IT_10/article/details/94768679</a></p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2020-03-24</span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/2020/03/23/memory-allocation/index.md target=_blank>阅读原始文档</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 X" data-sharer=x data-url=https://schaepher.github.io/2020/03/23/memory-allocation/ data-title=内存分配器 data-hashtags=Memcache,Redis,PHP,GO,内存,内存分配><i class="fab fa-x-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="分享到 Threads" data-sharer=threads data-url=https://schaepher.github.io/2020/03/23/memory-allocation/ data-title=内存分配器><i class="fab fa-threads fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://schaepher.github.io/2020/03/23/memory-allocation/ data-hashtag=Memcache><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="分享到 Hacker News" data-sharer=hackernews data-url=https://schaepher.github.io/2020/03/23/memory-allocation/ data-title=内存分配器><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="分享到 Line" data-sharer=line data-url=https://schaepher.github.io/2020/03/23/memory-allocation/ data-title=内存分配器><i data-svg-src=/lib/simple-icons/icons/line.min.svg aria-hidden=true></i></a><a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://schaepher.github.io/2020/03/23/memory-allocation/ data-title=内存分配器><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="分享到 Evernote" data-sharer=evernote data-url=https://schaepher.github.io/2020/03/23/memory-allocation/ data-title=内存分配器><i class="fab fa-evernote fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="分享到 Diaspora" data-sharer=diaspora data-url=https://schaepher.github.io/2020/03/23/memory-allocation/ data-title=内存分配器 data-description><i class="fab fa-diaspora fa-fw" aria-hidden=true></i></a><a href="https://t.me/share/url?url=https%3a%2f%2fschaepher.github.io%2f2020%2f03%2f23%2fmemory-allocation%2f&amp;text=%e5%86%85%e5%ad%98%e5%88%86%e9%85%8d%e5%99%a8" target=_blank title="分享到 Telegram"><i class="fab fa-telegram fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/memcache/>Memcache</a>,&nbsp;<a href=/tags/redis/>Redis</a>,&nbsp;<a href=/tags/php/>PHP</a>,&nbsp;<a href=/tags/go/>GO</a>,&nbsp;<a href=/tags/%E5%86%85%E5%AD%98/>内存</a>,&nbsp;<a href=/tags/%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D/>内存分配</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/2020/03/23/simple-map/ class=prev rel=prev title="简单的 map 实现"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>简单的 map 实现</a>
<a href=/2020/03/23/trees/ class=next rel=next title=各种树>各种树<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>由 <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.145.0">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.3.1-DEV"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2017 - 2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>xxxx</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i></a></div><div id=fixed-buttons-hidden><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=/lib/katex/katex.min.css><script src=/lib/autocomplete/autocomplete.min.js></script><script src=/lib/lunr/lunr.min.js></script><script src=/lib/lunr/lunr.stemmer.support.min.js></script><script src=/lib/lunr/lunr.zh.min.js></script><script src=/lib/lazysizes/lazysizes.min.js></script><script src=/lib/clipboard/clipboard.min.js></script><script src=/lib/sharer/sharer.min.js></script><script src=/lib/katex/katex.min.js></script><script src=/lib/katex/contrib/auto-render.min.js></script><script src=/lib/katex/contrib/copy-tex.min.js></script><script src=/lib/katex/contrib/mhchem.min.js></script><script>window.config={comment:{},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",lunrLanguageCode:"zh",lunrSegmentitURL:"/lib/lunr/lunr.segmentit.js",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:50,type:"lunr"}}</script><script src=/js/theme.min.js></script></body></html>